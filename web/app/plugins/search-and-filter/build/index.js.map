{"version":3,"file":"index.js","mappings":"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","sources":["webpack://search-and-filter/./src/edit.js","webpack://search-and-filter/./src/save.js","webpack://search-and-filter/external window \"React\"","webpack://search-and-filter/external window [\"wp\",\"apiFetch\"]","webpack://search-and-filter/external window [\"wp\",\"blockEditor\"]","webpack://search-and-filter/external window [\"wp\",\"blocks\"]","webpack://search-and-filter/webpack/bootstrap","webpack://search-and-filter/webpack/runtime/compat get default export","webpack://search-and-filter/webpack/runtime/define property getters","webpack://search-and-filter/webpack/runtime/hasOwnProperty shorthand","webpack://search-and-filter/webpack/runtime/make namespace object","webpack://search-and-filter/./src/index.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useBlockProps } from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\n\n\nexport default function Edit({ attributes, setAttributes }) {\n\tconst blockProps = useBlockProps();\n\tconst [categories, setCategories] = useState([]);\n\tconst [posts, setPosts] = useState([]);\n\n\tuseEffect(() => {\n\t\t// Fetch categories\n\t\tapiFetch({ path: '/wp/v2/categories' }).then((categories) => {\n\t\t\tsetCategories(categories);\n\t\t\tsetAttributes({ categories: categories }); // Save categories to block's attributes\n\t\t});\n\t}, [attributes.category]);\n\n\tuseEffect(() => {\n\t\tconst fetchPosts = async () => {\n\t\t\ttry {\n\t\t\t\t// Fetch all posts\n\t\t\t\tconst posts = await apiFetch({ path: '/wp/v2/posts' });\n\n\t\t\t\t// Extract category IDs from posts\n\t\t\t\tconst categoryIds = posts.map((post) => post.categories[0]);\n\n\t\t\t\t// Fetch category details for each category ID\n\t\t\t\tconst categoriesData = await Promise.all(\n\t\t\t\t\tcategoryIds.map((categoryId) =>\n\t\t\t\t\t\tapiFetch({ path: `/wp/v2/categories/${categoryId}` })\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\t// Combine posts with category names\n\t\t\t\tconst postsWithCategories = posts.map((post) => {\n\t\t\t\t\tconst category = categoriesData.find((cat) => cat.id === post.categories[0]);\n\t\t\t\t\treturn { ...post, categoryName: category.name, categoryID: category.id  };\n\t\t\t\t});\n\n\t\t\t\tsetPosts(postsWithCategories);\n\t\t\t\tsetAttributes({ posts: postsWithCategories }); // Save posts to block's attributes\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error fetching posts:', error);\n\t\t\t}\n\t\t};\n\n\t\tfetchPosts();\n\t}, [attributes.posts]);\n\n\t// Filter posts based on the selected category\n\tconst filteredPosts = posts.filter(\n\t\t(post) => !attributes.category || post.categories[0] === parseInt(attributes.category, 10)\n\t);\n\n\treturn (\n\t\t<div {...blockProps}>\n\t\t\t{typeof categories !== 'undefined' && categories.length > 0 ? (<select\n\t\t\t\tvalue={attributes.category}\n\t\t\t\tonChange={(e) => setAttributes({ category: e.target.value })}\n\t\t\t>\n\t\t\t\t<option value=\"\">Select a category</option>\n\t\t\t\t{categories.map((category) => (\n\t\t\t\t\t<option key={category.id} value={category.id}>\n\t\t\t\t\t\t{category.name}\n\t\t\t\t\t</option>\n\t\t\t\t))}\n\t\t\t</select>\n\t\t\t) : (\n\t\t\t\t<p>Loading categories...</p>\n\t\t\t)}\n\n\t\t\t{/* Display a list of posts based on the selected category */}\n\t\t\t<ul>\n\t\t\t\t{filteredPosts.map((post) => (\n\t\t\t\t\t<li key={post.id}>\n\t\t\t\t\t\t<strong>{post.title.rendered}</strong> - {post.categoryName}\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n}","\nimport { useBlockProps } from '@wordpress/block-editor';\n\nexport default function Save({ attributes }) {\n    const blockProps = useBlockProps.save();\n\n    \n   const categories = attributes.categories;\n   const posts = attributes.posts;\n\n\n    // Filter posts based on the selected category\n    // const filteredPosts = attributes.posts.filter(\n    //     (post) => !attributes.category || post.categories[0] === parseInt(attributes.category, 10)\n    // );\n\n\n    return (\n        <div {...blockProps}>\n            {typeof categories !== 'undefined' && categories.length > 0 ? (<select\n             value={attributes.category}\n                \n            >\n                <option value=\"\">Select a category</option>\n                {categories.map((category) => (\n                    <option key={category.id} value={category.id}>\n                        {category.name}\n                    </option>\n                ))}\n            </select>\n            ) : (\n                <p>Loading categories...</p>\n            )}\n\n            <ul>\n                {posts.map((post) => (\n                    <li key={post.id} data-category={post.categoryID}>\n                        <strong>{post.title.rendered}</strong> - {post.categoryName}\n                    </li>\n                ))}\n            </ul>\n        </div>\n    );\n}","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { registerBlockType } from '@wordpress/blocks';\nimport Edit from './edit';\nimport Save from './save';\n\nregisterBlockType('search-and-filter/search-and-filter', {\n\ttitle: 'Search and Filter',\n\ticon: 'filter',\n\tcategory: 'widgets',\n\tedit: Edit,\n\tsave: Save,\n\tattributes: {\n\t\tposts: {\n\t\t\ttype: 'array',\n\t\t\tdefault: []\n\t\t},\n\t\tcategory: {\n\t\t\ttype: 'string',\n\t\t\tdefault: ''\n\t\t}\n\t},\n});"],"names":["useState","useEffect","useBlockProps","apiFetch","Edit","attributes","setAttributes","blockProps","categories","setCategories","posts","setPosts","path","then","category","fetchPosts","categoryIds","map","post","categoriesData","Promise","all","categoryId","postsWithCategories","find","cat","id","categoryName","name","categoryID","error","console","filteredPosts","filter","parseInt","createElement","length","value","onChange","e","target","key","title","rendered","Save","save","registerBlockType","icon","edit","type","default"],"sourceRoot":""}